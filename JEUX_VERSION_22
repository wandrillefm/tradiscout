<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tradiscout</title>
    <link rel="icon" type="image/x-icon" href="FINAL.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sanchez&family=Uncial+Antiqua&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #e2e5b3; 
            --navy: #0a1d37;    
            --overlay-yellow: rgba(226, 229, 179, 0.6); 
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-image: 
                linear-gradient(var(--overlay-yellow), var(--overlay-yellow)),
                url('IMG_5189.jpeg');
            background-size: 100% auto;
            background-position: center center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: var(--bg-color);
            color: var(--navy);
            font-family: 'Sanchez', serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            text-align: center;
            overflow-x: hidden;
        }

        /* --- √âCRAN DE CHARGEMENT --- */
        #loader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--navy);
            display: flex; justify-content: center; align-items: center;
            z-index: 2000; transition: opacity 0.6s ease;
        }
        .typewriter-text {
            color: var(--bg-color);
            font-family: 'Uncial Antiqua', cursive;
            font-size: 2.5rem; letter-spacing: 5px;
            border-right: 3px solid var(--bg-color);
            white-space: nowrap; overflow: hidden; width: 0;
            padding-right: 5px;
        }
        .cursor-blink { animation: blink 0.7s infinite; }
        @keyframes blink { 50% { border-color: transparent; } }

        .container {
            width: 90%;
            max-width: 800px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            opacity: 0;
            transition: opacity 1s ease;
        }

        header { padding-top: 30px; z-index: 600; }
        .logo {
            font-family: 'Uncial Antiqua', cursive;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.4s ease;
            font-size: 3.2rem;
        }

        .main-nav { display: flex; justify-content: center; gap: 20px; z-index: 600; margin-bottom: 20px; }
        .main-nav a { text-decoration: none; color: var(--navy); font-size: 0.95rem; transition: 0.3s; cursor: pointer; }

        .tab { animation: fadeIn 0.5s ease forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content { padding-bottom: 20px; flex-grow: 1; display: flex; align-items: center; justify-content: center; }
        .content p { 
            font-size: 1.05rem; 
            line-height: 1.4; 
            max-width: 580px; 
            margin: 0 auto;
            padding: 15px;
            border-radius: 5px;
        }

        footer { font-size: 0.85rem; width: 100%; z-index: 600; padding-bottom: 20px; }
        .mobile-nav-bg { display: none; }

        .grid-social { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; width: 100%; }
        .card-social { border: 1px solid var(--navy); padding: 10px 5px; text-decoration: none; color: var(--navy); transition: 0.2s; background: rgba(226, 229, 179, 0.7); }
        .card-social:hover { background: var(--navy); color: var(--bg-color); }
        .card-social span { display: block; font-family: 'Uncial Antiqua'; font-size: 1.2rem; }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Styles jeux */
        .game-input { 
            padding: 12px; margin: 10px; border: 2px solid var(--navy); border-radius: 8px; 
            font-size: 1.2rem; font-family: 'Sanchez', serif; width: 280px; max-width: 90vw;
            text-transform: uppercase;
        }
        .game-btn { 
            background: var(--navy); color: var(--bg-color); padding: 12px 24px; border: none; 
            border-radius: 8px; cursor: pointer; margin: 10px; font-family: 'Sanchez', serif; 
            font-size: 1.1rem;
        }
        .game-btn:hover { background: var(--bg-color); color: var(--navy); }

        /* S√âMAPHORE COMPLET */
        .semaphore-container {
            position: relative; width: 320px; height: 450px; margin: 20px auto;
            background: rgba(255,255,255,0.9); border-radius: 20px; padding: 20px;
            border: 4px solid var(--navy); box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .semaphore-man {
            position: absolute; left: 50%; top: 40%; transform: translate(-50%, -50%);
            width: 120px; height: 200px;
        }
        .body { fill: #8B4513; }
        .head { fill: #FDBCB4; stroke: #333; stroke-width: 2; }
        .left-arm, .right-arm {
            fill: none; stroke: #654321; stroke-width: 12; stroke-linecap: round; stroke-linejoin: round;
            cursor: grab; transition: stroke 0.2s;
        }
        .left-arm:hover, .right-arm:hover { stroke: #D2691E; cursor: grab; }
        .left-arm.dragging, .right-arm.dragging { stroke: #FF8C00; cursor: grabbing; }
        .flag-left, .flag-right {
            position: absolute; width: 60px; height: 60px; border-radius: 8px;
            stroke-width: 3; transition: transform 0.3s ease;
        }
        .flag-left { fill: #d32f2f; stroke: #b71c1c; left: -30px; }
        .flag-right { fill: #1976d2; stroke: #0d47a1; right: -30px; }
        .letter-display {
            position: absolute; bottom: -60px; left: 50%; transform: translateX(-50%);
            font-family: 'Uncial Antiqua', cursive; font-size: 3rem; color: var(--navy);
            background: rgba(226,229,179,0.8); padding: 10px 20px; border-radius: 15px;
            border: 3px solid var(--navy); min-width: 60px;
        }
        .positions-guide {
            position: absolute; top: -40px; left: 50%; transform: translateX(-50%);
            font-size: 0.8rem; color: var(--navy); background: rgba(255,255,255,0.9);
            padding: 5px 10px; border-radius: 10px; border: 2px solid var(--navy);
        }
        
        .morse-result {
            font-size: 1.4rem; font-family: 'Uncial Antiqua'; font-weight: bold; 
            margin: 20px; padding: 20px; background: rgba(226,229,179,0.6); 
            border-radius: 12px; border-left: 6px solid var(--navy); min-height: 30px;
        }
        .mode-indicator {
            background: var(--navy); color: var(--bg-color); padding: 8px 16px; 
            border-radius: 20px; font-size: 0.9rem; margin: 10px auto; display: inline-block;
        }
        .mail-link { color: var(--navy); font-weight: 600; text-decoration: underline; }

        @media (max-width: 768px) {
            body { background-size: cover; }
            .container { display: block; padding-top: 30px; height: auto; min-height: 100vh;}
            header { margin-bottom: 40px; }
            .logo { font-size: 2.3rem; }
            .main-nav { 
                position: fixed; bottom: 45px; left: 0; width: 100%; 
                background-color: var(--bg-color); padding: 10px 0; gap: 20px; padding-top: 30px;
            }
            .mobile-nav-bg { 
                display: block; position: fixed; bottom: 0; left: 0; width: 100%; 
                height: 110px; background-color: var(--bg-color); z-index: 550; 
            }
            footer { position: fixed; bottom: 0; left: 0; padding-bottom: 15px; background-color: transparent; }
            .grid-social { grid-template-columns: repeat(2, 1fr); }
            .semaphore-container { width: 280px; height: 400px; }
            .game-input { width: 90vw; }
        }
    </style>
</head>
<body class="no-scrollbar">

    <div id="loader">
        <div id="typewriter" class="typewriter-text cursor-blink"></div>
    </div>

    <div class="mobile-nav-bg"></div>

    <div class="container" id="main-content">
        <header>
            <h1 id="main-logo" class="logo" onclick="show('home')">TRADISCOUT</h1>
        </header>

        <nav class="main-nav">
            <a onclick="show('home')">accueil</a>
            <a onclick="show('rejoindre')">rejoindre</a>
            <a onclick="show('jeux')">jeux</a>
            <a onclick="show('contact')">contact</a>
        </nav>

        <main class="content">
            <!-- HOME -->
            <div id="home" class="tab">
                <p>Depuis d√©but 2025, nous aidons les jeunes √† vivre leur foi tous les jours, par le scoutisme.
                    Ce qui n'√©tait au d√©part qu'un simple compte insta de rigolade, est devenue une v√©ritable communaut√© anim√©e par une √©quipe de 7 jeunes, offrant √† tous des d√©bats, du contenu, et des nouvelles sur le scoutisme et la chr√©tient√© √† travers l'Europe et plus particuli√®rement en France.</p>
            </div>

            <!-- REJOINDRE -->
            <div id="rejoindre" class="tab" style="display:none">
                <div class="grid-social">
                    <a href="https://instagram.com/tradiscout" class="card-social"><small>Instagram</small><span>4200+ personnes</span></a>
                    <a href="https://pinterest.com/tradiscout" class="card-social"><small>Pinterest</small><span>20+ fonds d'√©crans</span></a>
                    <a href="https://instagram.com/channel/AbYQB1ZxjbUUhCE5" class="card-social"><small>Groupe de priere</small><span>Tout les vendredis</span></a>
                    <a href="https://www.deezer.com/fr/playlist/13549630343?host=0&utm_campaign=clipboard-generic&utm_source=user_sharing&utm_content=playlist-13549630343&deferredFl=1&universal_link=1" class="card-social"><small>Deezer</small><span>615 titres</span></a>
                    <a href="https://open.spotify.com/playlist/4dol5mUeugWo8hvZdXnvZ8?si=Nt_9ywu5RKafZfrsUyR3Tg&nd=1&dlsi=df14b7be1f7a45ef" class="card-social"><small>Spotify</small><span>494 titres</span></a>
                    <a href="https://tradiscout.notion.site/Tradiscout-2ac8736dad9f80ff9adadb6e2fb1165a?source=copy_link" class="card-social"><small>Notion</small><span>Ressources</span></a>
                </div>
            </div>

            <!-- JEUX -->
            <div id="jeux" class="tab" style="display:none">
                <p>D√©couvre nos jeux d'apprentissage autour du scoutisme et des codes !</p>
                <div class="grid-social">
                    <a onclick="show('jeux-morse')" class="card-social"><small>Morse</small><span>Texte ‚Üî Code (auto-d√©t√©ction)</span></a>
                    <a onclick="show('jeux-semaphore')" class="card-social"><small>S√©maphore</small><span>Fais pivoter les bras pour coder !</span></a>
                    <a onclick="show('jeux-vigenere')" class="card-social"><small>Vigen√®re</small><span>Cr√©e ton propre chiffre secret</span></a>
                </div>
            </div>

            <!-- MORSE -->
            <div id="jeux-morse" class="tab" style="display:none">
                <p>Code Morse intelligent ! Tape du texte OU du Morse (s√©par√© par espaces) :</p>
                <input type="text" class="game-input" id="morse-input" placeholder="BONJOUR ou .-.. --- .-.." style="width:350px; max-width:90vw;">
                <div id="morse-mode" class="mode-indicator" style="display:none;"></div>
                <div id="morse-output" class="morse-result">Tape quelque chose pour commencer...</div>
                <a onclick="show('jeux')" class="card-social">‚Üê Retour aux jeux</a>
            </div>

            <!-- S√âMAPHORE COMPLET -->
            <div id="jeux-semaphore" class="tab" style="display:none">
                <p>Fais pivoter les bras du s√©maphoriste pour coder des lettres !</p>
                <div class="semaphore-container">
                    <div class="positions-guide">Tire les bras vers 0¬∞ 45¬∞ 90¬∞ 135¬∞ 180¬∞</div>
                    <svg class="semaphore-man" viewBox="0 0 120 200">
                        <!-- T√™te -->
                        <circle class="head" cx="60" cy="30" r="18"/>
                        <!-- Corps -->
                        <rect class="body" x="45" y="48" width="30" height="80" rx="15"/>
                        <!-- Bras gauche -->
                        <line class="left-arm" id="left-arm" x1="60" y1="65" x2="25" y2="90" stroke-width="12"/>
                        <!-- Bras droit -->
                        <line class="right-arm" id="right-arm" x1="60" y1="65" x2="95" y2="90" stroke-width="12"/>
                        <!-- Drapeau gauche -->
                        <g id="flag-left" class="flag-left" transform="translate(-10,75)">
                            <rect width="50" height="50" rx="8" stroke-width="2"/>
                            <circle cx="25" cy="25" r="12" fill="white"/>
                            <text x="25" y="32" font-size="16" font-weight="bold" text-anchor="middle" fill="#d32f2f">R</text>
                        </g>
                        <!-- Drapeau droit -->
                        <g id="flag-right" class="flag-right" transform="translate(80,75)">
                            <rect width="50" height="50" rx="8" stroke-width="2"/>
                            <circle cx="25" cy="25" r="12" fill="white"/>
                            <text x="25" y="32" font-size="16" font-weight="bold" text-anchor="middle" fill="#1976d2">B</text>
                        </g>
                    </svg>
                    <div id="letter-display" class="letter-display">?</div>
                </div>
                <a onclick="show('jeux')" class="card-social">‚Üê Retour aux jeux</a>
            </div>

            <!-- VIGENERE -->
            <div id="jeux-vigenere" class="tab" style="display:none">
                <p>Chiffre de Vigen√®re - Scout Edition</p>
                <input type="text" class="game-input" id="vigi-text" placeholder="Ton message secret..." style="width:280px;">
                <br>
                <input type="text" class="game-input" id="vigi-key" placeholder="Cl√© (mot de passe)" style="width:280px;">
                <br>
                <button class="game-btn" onclick="vigenereEncrypt()">üîê Crypter</button>
                <p id="vigi-result" style="font-size:1.2rem; font-family:'Uncial Antiqua'; margin:20px; padding:15px; background:rgba(226,229,179,0.5); border-radius:10px;"></p>
                <a onclick="show('jeux')" class="card-social">‚Üê Retour aux jeux</a>
            </div>

            <!-- CONTACT -->
            <div id="contact" class="tab" style="display:none">
                <p>Vous souhaitez nous envoyer une photo, une id√©e de m√®mes, une suggestion ou nous signaler un probl√®me?</p>
                <a href="mailto:tradiscout@gmail.com" class="mail-link">Envoyez nous un mail!</a>
            </div>
        </main>

        <footer>
            <p>2026 Tradiscout - Verso l'Alto!</p>
        </footer>
    </div>

    <script>
        const text = "TRADISCOUT";
        const target = document.getElementById('typewriter');
        let i = 0;

        function type() {
            if (i < text.length) {
                target.innerText += text.charAt(i);
                i++;
                target.style.width = 'auto'; 
                setTimeout(type, 120);
            } else {
                setTimeout(() => {
                    document.getElementById('loader').style.opacity = '0';
                    document.getElementById('main-content').style.opacity = '1';
                    setTimeout(() => {
                        document.getElementById('loader').style.display = 'none';
                    }, 600);
                }, 800);
            }
        }

        window.addEventListener('load', () => { setTimeout(type, 500); });

        function show(id) {
            document.querySelectorAll('.tab').forEach(t => t.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            const logo = document.getElementById('main-logo');
            if (id === 'rejoindre') logo.innerText = "rejoins-nous!";
            else if (id === 'contact') logo.innerText = "contact";
            else if (id === 'jeux') logo.innerText = "jeux";
            else if (id === 'jeux-morse') logo.innerText = "morse";
            else if (id === 'jeux-semaphore') logo.innerText = "s√©maphore";
            else if (id === 'jeux-vigenere') logo.innerText = "vigen√®re";
            else logo.innerText = "TRADISCOUT";
            window.scrollTo(0,0);
        }

        // === MORSE INTELLIGENT ===
        const morseTable = {
            A: ".-", B: "-...", C: "-.-.", D: "-..", E: ".", F: "..-.", G: "--.", H: "....",
            I: "..", J: ".---", K: "-.-", L: ".-..", M: "--", N: "-.", O: "---", P: ".--.",
            Q: "--.-", R: ".-.", S: "...", T: "-", U: "..-", V: "...-", W: ".--", X: "-..-",
            Y: "-.--", Z: "--..", " ": "/"
        };
        const morseReverse = {};
        for (let letter in morseTable) morseReverse[morseTable[letter]] = letter;

        function detectMode(input) {
            const words = input.trim().split(/\s+/);
            for (let word of words) {
                if (/^[.-]+\s*$/.test(word.replace(/\s/g, ''))) return 'decode';
                if (/[A-Z]/.test(word)) return 'encode';
            }
            return 'encode';
        }

        function smartMorse() {
            const input = document.getElementById('morse-input').value.trim();
            if (!input) {
                document.getElementById('morse-output').innerText = "Tape quelque chose pour commencer...";
                document.getElementById('morse-mode').style.display = 'none';
                return;
            }
            
            const mode = detectMode(input);
            const modeEl = document.getElementById('morse-mode');
            const resultEl = document.getElementById('morse-output');
            
            modeEl.style.display = 'inline-block';
            modeEl.innerText = mode === 'encode' ? 'üî§ MODE : Texte ‚Üí Morse' : 'üì° MODE : Morse ‚Üí Texte';
            
            let result = '';
            if (mode === 'encode') {
                result = input.toUpperCase().split(/\s+/).map(word => 
                    word.split('').map(char => morseTable[char] || char).join(' ')
                ).join(' / ');
            } else {
                result = input.split(/\s+/).map(code => morseReverse[code] || '?').join('');
            }
            resultEl.innerText = result;
        }
        document.getElementById('morse-input').addEventListener('input', smartMorse);

        // === S√âMAPHORE COMPLET ===
        const semaphorePositions = [0, 45, 90, 135, 180];
        const semaphoreLetters = {
            '0_0': 'E', '0_45': 'A', '0_90': 'I', '0_135': 'S', '0_180': 'H',
            '45_0': 'T', '45_45': 'M', '45_90': 'O', '45_135': 'G', '45_180': 'L',
            '90_0': 'N', '90_45': 'U', '90_90': 'F', '90_135': 'P', '90_180': 'R',
            '135_0': 'W', '135_45': 'B', '135_90': 'D', '135_135': 'K', '135_180': 'V',
            '180_0': 'X', '180_45': 'C', '180_90': 'Q', '180_135': 'J', '180_180': 'Z'
        };

        let isDragging = false, currentArm = null;

        function snapToAngle(angle) {
            const closest = semaphorePositions.reduce((prev, curr) => 
                Math.abs(curr - angle) < Math.abs(prev - angle) ? curr : prev
            );
            return closest;
        }

        function updateLetter() {
            const leftAngle = parseInt(document.getElementById('left-arm').dataset.angle || 0);
            const rightAngle = parseInt(document.getElementById('right-arm').dataset.angle || 0);
            const key = `${leftAngle}_${rightAngle}`;
            const letter = semaphoreLetters[key] || '?';
            document.getElementById('letter-display').textContent = letter;
        }

        function initSemaphore() {
            const leftArm = document.getElementById('left-arm');
            const rightArm = document.getElementById('right-arm');
            const leftFlag = document.getElementById('flag-left');
            const rightFlag = document.getElementById('flag-right');

            // Position initiale
            leftArm.dataset.angle = 45;
            rightArm.dataset.angle = 90;
            leftArm.setAttribute('transform', 'rotate(-45,60,65)');
            rightArm.setAttribute('transform', 'rotate(90,60,65)');
            leftFlag.setAttribute('transform', 'translate(-10,75) rotate(-45,60,65)');
            rightFlag.setAttribute('transform', 'translate(80,75) rotate(90,60,65)');
            updateLetter();
        }

        // Drag events pour bras gauche
        document.getElementById('left-arm').addEventListener('mousedown', function(e) {
            isDragging = true; currentArm = 'left';
            this.classList.add('dragging');
        });

        // Drag events pour bras droit
        document.getElementById('right-arm').addEventListener('mousedown', function(e) {
            isDragging = true; currentArm = 'right';
            this.classList.add('dragging');
        });

        document.addEventListener('mousemove', function(e) {
            if (!isDragging) return;
            
            const rect = document.querySelector('.semaphore-container').getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + 160; // Position du pivot (√©paules)
            const mouseX = e.clientX;
            const mouseY = e.clientY;
            
            const deltaX = mouseX - centerX;
            const deltaY = mouseY - centerY;
            let angle = Math.atan2(deltaY, deltaX) * 180 / Math.PI;
            
            // Normaliser l'angle pour le bras gauche (miroir)
            if (currentArm === 'left') angle = (angle + 180) % 360 - 180;
            
            const snappedAngle = snapToAngle(angle);
            const arm = document.getElementById(currentArm === 'left' ? 'left-arm' : 'right-arm');
            const flag = document.getElementById(currentArm === 'left' ? 'flag-left' : 'flag-right');
            
            arm.dataset.angle = snappedAngle;
            arm.setAttribute('transform', `rotate(${currentArm === 'left' ? -snappedAngle : snappedAngle},60,65)`);
            flag.setAttribute('transform', `translate(${currentArm === 'left' ? '-10' : '80'},75) rotate(${currentArm === 'left' ? -snappedAngle : snappedAngle},60,65)`);
            
            updateLetter();
        });

        document.addEventListener('mouseup', function() {
            if (isDragging) {
                isDragging = false;
                document.querySelector('.left-arm.dragging')?.classList.remove('dragging');
                document.querySelector('.right-arm.dragging')?.classList.remove('dragging');
                currentArm = null;
            }
        });

        // VIGENER√à
        function vigenereEncrypt() {
            const text = document.getElementById('vigi-text').value.toUpperCase();
            const key = document.getElementById('vigi-key').value.toUpperCase();
            if (!text || !key) return;
            
            let result = "", j = 0;
            for (let i = 0; i < text.length; i++) {
                const c = text[i];
                if (/[A-Z]/.test(c)) {
                    const shift = key[j % key.length].charCodeAt(0) - 65;
                    result += String.fromCharCode((c.charCodeAt(0) - 65 + shift) % 26 + 65);
                    j++;
                } else result += c;
            }
            document.getElementById('vigi-result').innerText = `‚Üí ${result}`;
        }

        // Initialiser s√©maphore quand on arrive sur la page
        document.getElementById('jeux-semaphore').addEventListener('transitionend', initSemaphore);
    </script>
</body>
</html>
